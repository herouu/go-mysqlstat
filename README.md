## mysqlstat golangè¯­è¨€ç‰ˆæœ¬

ğŸ‘‰ å„ä½å¦‚æœæœ‰ä»€ä¹ˆæ‹“å±•çš„ç‚¹å­æ¬¢è¿æissue

å‚è€ƒï¼š
https://github.com/hcymysql/mysqlstat


- [x] å®æ—¶ç›‘æ§ï¼šmysqlstat å¯ä»¥å®æ—¶ç›‘æ§ MySQL æœåŠ¡å™¨çš„ QPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰ã€TPSï¼ˆæ¯ç§’äº‹åŠ¡æ•°ï¼‰ä»¥åŠç½‘ç»œå¸¦å®½ä½¿ç”¨æƒ…å†µç­‰æŒ‡æ ‡ã€‚
- [x] æŸ¥è¯¢åˆ†æï¼šå®ƒå¯ä»¥å±•ç¤ºæ‰§è¡Œæ¬¡æ•°æœ€é¢‘ç¹çš„å‰Næ¡ SQL è¯­å¥ï¼Œå¸®åŠ©å®šä½æŸ¥è¯¢æ•ˆç‡ä½ä¸‹çš„é—®é¢˜ï¼Œä»¥ä¾¿è¿›è¡Œä¼˜åŒ–ã€‚
- [x] è¡¨æ–‡ä»¶åˆ†æï¼šmysqlstat å¯ä»¥åˆ—å‡ºè®¿é—®æ¬¡æ•°æœ€é¢‘ç¹çš„å‰Nå¼ è¡¨æ–‡ä»¶ï¼ˆ.ibdï¼‰ï¼Œè¿™æœ‰åŠ©äºæŸ¥æ‰¾çƒ­ç‚¹è¡¨å’Œç£ç›˜ä½¿ç”¨æƒ…å†µã€‚
- [x] é”é˜»å¡ï¼šå·¥å…·å¯ä»¥æ˜¾ç¤ºå½“å‰è¢«é”é˜»å¡çš„ SQL è¯­å¥ï¼Œå¸®åŠ©è¯†åˆ«å¹¶è§£å†³é”ç›¸å…³çš„é—®é¢˜ã€‚
- [x] è‡ªåŠ¨æ€æ­»å½“å‰é”é˜»å¡çš„SQL
- [x] æ­»é”ä¿¡æ¯ï¼šmysqlstat å¯ä»¥æä¾›å…³äºæ­»é”çš„ä¿¡æ¯ï¼Œå¸®åŠ© DBA äº†è§£å¹¶è§£å†³æ­»é”é—®é¢˜ã€‚
- [x] ç´¢å¼•åˆ†æï¼šå®ƒå¯ä»¥æŸ¥æ‰¾é‡å¤æˆ–å†—ä½™çš„ç´¢å¼•ï¼Œå¸®åŠ©ä¼˜åŒ–ç´¢å¼•ä½¿ç”¨å’Œå‡å°‘å­˜å‚¨ç©ºé—´çš„å ç”¨ã€‚
- [x] è¿æ¥æ•°ç»Ÿè®¡ï¼šå·¥å…·å¯ä»¥ç»Ÿè®¡åº”ç”¨ç«¯ IP çš„è¿æ¥æ•°æ€»å’Œï¼Œæœ‰åŠ©äºäº†è§£æ•°æ®åº“çš„è¿æ¥è´Ÿè½½æƒ…å†µã€‚
- [x] è¡¨å¤§å°ç»Ÿè®¡ï¼šmysqlstat å¯ä»¥æä¾›åº“ä¸­æ¯ä¸ªè¡¨çš„å¤§å°ç»Ÿè®¡ä¿¡æ¯ï¼Œæœ‰åŠ©äºäº†è§£è¡¨çš„å­˜å‚¨å ç”¨æƒ…å†µã€‚
- [x] å¿«é€Ÿæ‰¾å‡ºæ²¡æœ‰ä¸»é”®çš„è¡¨
- [x] Binlog åˆ†æï¼šå®ƒå¯ä»¥åœ¨é«˜å³°æœŸåˆ†æå“ªäº›è¡¨çš„ TPS è¾ƒé«˜ï¼Œå¸®åŠ©å®šä½æ€§èƒ½ç“¶é¢ˆæˆ–ä¼˜åŒ–çƒ­ç‚¹è¡¨ã€‚
- [ ] æŸ¥çœ‹ä¸»ä»å¤åˆ¶ä¿¡æ¯ï¼šå·¥å…·å¯ä»¥æä¾›ä¸»ä»å¤åˆ¶çŠ¶æ€å’Œå»¶è¿Ÿæƒ…å†µï¼Œæ–¹ä¾¿ç›‘æ§å’Œç®¡ç†ä¸»ä»å¤åˆ¶ç¯å¢ƒã€‚


```bash
NAME:
   go-mysqlstat - MySQLå‘½ä»¤è¡Œç›‘æ§å·¥å…· - mysqlstat

USAGE:
   go-mysqlstat [global options] command [command options] 

VERSION:
   1.0.0

COMMANDS:
   help, h  Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --mysql_ip value, -H value        Mysql IP
   --mysql_port value, -P value      Mysql Port
   --mysql_user value, -u value      Mysql User
   --mysql_password value, -p value  Mysql Password
   --top value                       éœ€è¦æä¾›ä¸€ä¸ªæ•´æ•°ç±»å‹çš„å‚æ•°å€¼ï¼Œè¯¥å‚æ•°å€¼è¡¨ç¤ºæ‰§è¡Œæ¬¡æ•°æœ€é¢‘ç¹çš„å‰Næ¡SQLè¯­å¥
   --io value                        éœ€è¦æä¾›ä¸€ä¸ªæ•´æ•°ç±»å‹çš„å‚æ•°å€¼ï¼Œè¯¥å‚æ•°å€¼è¡¨ç¤ºè®¿é—®æ¬¡æ•°æœ€é¢‘ç¹çš„å‰Nå¼ è¡¨æ–‡ä»¶ibd
   --uncommit value                  éœ€è¦æä¾›ä¸€ä¸ªæ•´æ•°ç±»å‹çš„å‚æ•°å€¼ï¼Œè¯¥å‚æ•°å€¼è¡¨ç¤ºæ—¶é—´>=Nç§’çš„æœªæäº¤äº‹åŠ¡çš„SQL
   --lock                            æŸ¥çœ‹å½“å‰é”é˜»å¡çš„SQL (default: false)
   --kill                            æ€æ­»å½“å‰é”é˜»å¡çš„SQL (default: false)
   --index                           æŸ¥çœ‹é‡å¤æˆ–å†—ä½™çš„ç´¢å¼• (default: false)
   --conn                            æŸ¥çœ‹åº”ç”¨ç«¯IPè¿æ¥æ•°æ€»å’Œ (default: false)
   --tinfo                           ç»Ÿè®¡åº“é‡Œæ¯ä¸ªè¡¨çš„å¤§å° (default: false)
   --fpk                             å¿«é€Ÿæ‰¾å‡ºæ²¡æœ‰ä¸»é”®çš„è¡¨ (default: false)
   --dead                            æŸ¥çœ‹æ­»é”ä¿¡æ¯ (default: false)
   --binlog                          Binlogåˆ†æ-é«˜å³°æœŸæ’æŸ¥å“ªäº›è¡¨TPSæ¯”è¾ƒé«˜ (default: false)
   --repl                            æŸ¥çœ‹ä¸»ä»å¤åˆ¶ä¿¡æ¯ (default: false)
   --help, -h                        show help
   --version, -v                     print the version

```

-- binlog

```text
SHOW VARIABLES LIKE 'binlog_row_metadata'; 
SHOW VARIABLES LIKE 'binlog_format';


binlog_format éœ€è®¾ç½®ä¸ºROW
binlog_row_metadata éœ€è®¾ç½®ä¸º FULL

```